<html>
  <head>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sourate As-Saffat (الصافات) - Exploration Interactive</title>
    <style>
      body {
        font-family: "Noto Sans", sans-serif;
        background-color: #f0f4f8;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #2c3e50;
      }
      h1,
      h2 {
        color: #34495e;
        text-align: center;
      }
      .container {
        background-color: #ffffff;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
        width: 90%;
        max-width: 800px;
      }
      .player-container {
        text-align: center;
        margin-bottom: 30px;
      }
      audio {
        width: 100%;
        margin-top: 15px;
      }
      .info {
        text-align: center;
        color: #7f8c8d;
        margin-bottom: 20px;
      }
      .arabic {
        font-family: "Scheherazade", serif;
        font-size: 28px;
        margin-top: 15px;
        text-align: right;
        direction: rtl;
        line-height: 1.8;
      }
      .verse-container {
        max-height: 500px;
        overflow-y: auto;
        padding-right: 15px;
      }
      .verse {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid #ecf0f1;
      }
      .verse-number {
        font-weight: bold;
        color: #3498db;
        margin-right: 10px;
      }
      .translation {
        font-style: italic;
        color: #7f8c8d;
        margin-top: 10px;
      }
      #loading {
        text-align: center;
        color: #3498db;
        font-size: 18px;
        margin-top: 20px;
      }
      .navigation {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 500px;
        margin-top: 30px;
      }
      .nav-button {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        transition: background-color 0.3s ease;
      }
      .nav-button:hover {
        background-color: #2980b9;
      }
      .interactive-section {
        background-color: #e8f6ff;
        border-radius: 10px;
        padding: 20px;
        margin-top: 30px;
      }
      .interactive-item {
        background-color: #fff;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        cursor: pointer;
      }
      .interactive-item:hover {
        transform: translateY(-5px);
      }
      .interactive-item h3 {
        margin-top: 0;
        color: #2c3e50;
      }
      #as-saffat-canvas {
        width: 100%;
        height: 300px;
        margin: 20px 0;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .story-section {
        background-color: #e8f8f5;
        border-radius: 10px;
        padding: 20px;
        margin-top: 30px;
      }
      .story-title {
        font-weight: bold;
        color: #16a085;
        margin-bottom: 10px;
      }
      #story-content {
        font-style: italic;
        color: #34495e;
      }
      @media (max-width: 600px) {
        .container {
          padding: 20px;
        }
        .arabic {
          font-size: 24px;
        }
      }
      .fade-in {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
      }
      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Scheherazade:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1>Sourate As-Saffat (الصافات)</h1>
    <div class="container">
      <div class="player-container">
        <h2>Écouter la récitation</h2>
        <audio controls>
          <source
            src="https://download.quranicaudio.com/quran/mishaari_raashid_al_3afaasee/037.mp3"
            type="audio/mpeg"
          />
          Votre navigateur ne supporte pas l'élément audio.
        </audio>
      </div>
      <div class="info">
        <p>Sourate As-Saffat - سورة الصافات</p>
        <p>Récitée par Mishary Rashid Alafasy</p>
        <p class="arabic">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</p>
      </div>

      <canvas id="as-saffat-canvas"></canvas>

      <div class="interactive-section fade-in">
        <h2>Thèmes principaux de la sourate</h2>
        <div class="interactive-item" onclick="showStory('creation')">
          <h3>1. La création et l'unicité d'Allah</h3>
          <p>
            As-Saffat affirme la puissance créatrice d'Allah et Son unicité.
          </p>
        </div>
        <div class="interactive-item" onclick="showStory('prophets')">
          <h3>2. Les histoires des prophètes</h3>
          <p>
            La sourate mentionne plusieurs prophètes, dont Noé, Abraham, Moïse,
            Élie et Jonas.
          </p>
        </div>
        <div class="interactive-item" onclick="showStory('afterlife')">
          <h3>3. La vie après la mort</h3>
          <p>
            Elle décrit les récompenses du Paradis et les punitions de l'Enfer.
          </p>
        </div>
        <div class="interactive-item" onclick="showStory('angels')">
          <h3>4. Les anges et les djinns</h3>
          <p>As-Saffat évoque les rangs des anges et mentionne les djinns.</p>
        </div>
        <div class="interactive-item" onclick="showStory('victory')">
          <h3>5. La victoire finale des croyants</h3>
          <p>
            La sourate assure que les serviteurs sincères d'Allah seront
            victorieux.
          </p>
        </div>
      </div>

      <div class="story-section fade-in">
        <h2 class="story-title">Exploration des thèmes</h2>
        <p id="story-content">
          Cliquez sur un thème ci-dessus pour explorer son contenu dans la
          sourate As-Saffat.
        </p>
      </div>

      <div class="verse-container">
        <h2>Lire les versets</h2>
        <div id="loading">Chargement des versets...</div>
        <div id="verses"></div>
      </div>
    </div>

    <div class="navigation">
      <a href="s36.html" class="nav-button"
        >Sourate précédente</a
      >
      <a href="s38.html" class="nav-button"
        >Sourate suivante</a
      >
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const audio = document.querySelector("audio");
        const versesContainer = document.getElementById("verses");
        const loadingElement = document.getElementById("loading");
        const canvas = document.getElementById("as-saffat-canvas");
        const ctx = canvas.getContext("2d");

        // Set canvas size
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;

        // As-Saffat animation
        function drawAsSaffat() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Draw celestial background
          const gradient = ctx.createRadialGradient(
            canvas.width / 2,
            canvas.height / 2,
            0,
            canvas.width / 2,
            canvas.height / 2,
            canvas.width / 2
          );
          gradient.addColorStop(0, "#1a237e");
          gradient.addColorStop(0.5, "#303f9f");
          gradient.addColorStop(1, "#3f51b5");
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          // Draw stars
          for (let i = 0; i < 100; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const radius = Math.random() * 1.5;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fillStyle = "rgba(255, 255, 255, " + Math.random() + ")";
            ctx.fill();
          }

          // Draw angelic figures (simplified representation)
          const angelCount = 7;
          for (let i = 0; i < angelCount; i++) {
            const x = (canvas.width * (i + 1)) / (angelCount + 1);
            const y = canvas.height / 2;

            // Body
            ctx.beginPath();
            ctx.moveTo(x, y - 30);
            ctx.lineTo(x - 20, y + 30);
            ctx.lineTo(x + 20, y + 30);
            ctx.closePath();
            ctx.fillStyle = "rgba(255, 255, 255, 0.7)";
            ctx.fill();

            // Wings
            ctx.beginPath();
            ctx.moveTo(x, y - 10);
            ctx.quadraticCurveTo(x - 30, y - 40, x - 60, y);
            ctx.quadraticCurveTo(x - 30, y + 20, x, y - 10);
            ctx.moveTo(x, y - 10);
            ctx.quadraticCurveTo(x + 30, y - 40, x + 60, y);
            ctx.quadraticCurveTo(x + 30, y + 20, x, y - 10);
            ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
            ctx.fill();

            // Halo
            ctx.beginPath();
            ctx.arc(x, y - 40, 10, 0, Math.PI * 2);
            ctx.fillStyle = "rgba(255, 215, 0, 0.8)";
            ctx.fill();
          }

          // Draw As-Saffat calligraphy
          ctx.font = "60px Scheherazade";
          ctx.fillStyle = "#FFD700";
          ctx.textAlign = "center";
          ctx.textBaseline = "bottom";
          ctx.fillText("الصافات", canvas.width / 2, canvas.height - 20);

          requestAnimationFrame(drawAsSaffat);
        }

        drawAsSaffat();

        audio.addEventListener("play", function () {
          console.log("La récitation de la sourate As-Saffat a commencé");
        });

        audio.addEventListener("pause", function () {
          console.log(
            "La récitation de la sourate As-Saffat a été mise en pause"
          );
        });

        audio.addEventListener("ended", function () {
          console.log("La récitation de la sourate As-Saffat est terminée");
        });

        async function loadVerses() {
          try {
            const [arabicResponse, frenchResponse] = await Promise.all([
              axios.get("https://api.alquran.cloud/v1/surah/37"),
              axios.get("https://api.alquran.cloud/v1/surah/37/fr.hamidullah"),
            ]);

            const arabicVerses = arabicResponse.data.data.ayahs;
            const frenchVerses = frenchResponse.data.data.ayahs;

            loadingElement.style.display = "none";

            arabicVerses.forEach((verse, index) => {
              const verseElement = document.createElement("div");
              verseElement.className = "verse fade-in";
              verseElement.innerHTML = `
                        <p class="arabic"><span class="verse-number">${verse.numberInSurah}.</span> ${verse.text}</p>
                        <p class="translation">${frenchVerses[index].text}</p>
                    `;
              versesContainer.appendChild(verseElement);
            });

            // Trigger fade-in effect for verses
            setTimeout(() => {
              document
                .querySelectorAll(".verse")
                .forEach((el) => el.classList.add("visible"));
            }, 100);
          } catch (error) {
            console.error("Erreur lors du chargement des versets:", error);
            loadingElement.textContent =
              "Erreur lors du chargement des versets. Veuillez réessayer.";
          }
        }

        loadVerses();

        // Intersection Observer for fade-in effect
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("visible");
              }
            });
          },
          { threshold: 0.1 }
        );

        document
          .querySelectorAll(".fade-in")
          .forEach((el) => observer.observe(el));
      });

      function showStory(theme) {
        const storyContent = document.getElementById("story-content");
        switch (theme) {
          case "creation":
            storyContent.innerHTML =
              "La sourate As-Saffat commence par affirmer la puissance créatrice d'Allah. Elle mentionne la création des cieux et de la terre, ainsi que des étoiles comme ornements et protection. Cette partie souligne l'unicité d'Allah et Sa suprématie sur toute la création.";
            break;
          case "prophets":
            storyContent.innerHTML =
              "As-Saffat raconte les histoires de plusieurs prophètes. Elle mentionne Noé et le déluge, Abraham et son sacrifice, Moïse et Aaron, Élie (Ilyas) et son peuple, ainsi que l'histoire de Jonas (Yunus) et le grand poisson. Ces récits servent d'exemples de foi, de patience et de la miséricorde d'Allah.";
            break;
          case "afterlife":
            storyContent.innerHTML =
              "La sourate décrit en détail les récompenses du Paradis pour les croyants, y compris les délices et la paix qu'ils y trouveront. Elle contraste cela avec les punitions de l'Enfer pour les mécréants, utilisant des images vivides pour illustrer les conséquences des actions dans cette vie.";
            break;
          case "angels":
            storyContent.innerHTML =
              "As-Saffat commence par mentionner les anges rangés en rangs, glorifiant Allah. Elle fait également référence aux djinns, mentionnant comment certains d'entre eux essaient d'écouter les conversations célestes mais sont repoussés par des météores flamboyants.";
            break;
          case "victory":
            storyContent.innerHTML =
              "La sourate se termine sur une note positive, assurant que les serviteurs sincères d'Allah seront victorieux. Elle réaffirme que le message d'Allah prévaudra et que Ses messagers seront soutenus contre ceux qui s'opposent à eux, renforçant ainsi la foi des croyants.";
            break;
          default:
            storyContent.innerHTML =
              "Cliquez sur un thème ci-dessus pour explorer son contenu dans la sourate As-Saffat.";
        }
      }
    </script>
  </body>
</html>
